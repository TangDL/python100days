Python

### 装饰器:

1. 动态的增加函数的功能

2. @functools.wraps(fn)   也是一个装饰器，用于装饰被装饰函数的名称等
3. 不要在装饰器中引入会改变的量，但是可以使用list，tuple等本质上是指向一个地址的量

### 偏函数

1. 固定函数中的某一个参数，减少函数需要传入的参数个数
2. 当固定的参数处于中间位置时，想要修改后面的参数（即使没有固定）也需要加上函数名



## 模块

### 模块基础

1. 一个.py文件就是一个模块
2. 几个包含\__init__.py文件的目录就是一个包，该文件可以为空，也可以有代码，无论怎样，该文件也是一个模块，模块名字为所在包的名字

### 使用模块

1. 标准文件模板

   ~~~python
   # !/usr/bin/env python3
   # -*- coding:utf-8 -*-
   'something'                          # 模块说明，每一个模块的第一个字符串都被视为文档注释
   __author__='Rick'
   ~~~

2. if \__name__==\__main__:

   命令行运行该模块时，python解释器会把一个特殊变量\__name__置为\__main__,通过该判断可使得模块额外运行一些代码，在测试时常用该操作

3. 作用域

   private和public，定义私有变量，属性和函数



## 面向对象编程

### 对象基础

1. 面向过程编程将计算机程序视为一系列命令的集合，这些命令顺序的执行，为简化程序设计，这些命令也可以切分为多个子函数
2. 面向对象将计算机程序视为一系列对象的集合，这些对象都可以接受其他对象发过来的消息，并处理，消息在各个对象间传递
3. 举例，比如要打印一个学生的成绩
   - 面向过程，先定义出这个学生的成绩信息，可用一个dict表示，其次定义一个函数，利用该函数打印成绩
   - 面向对象，定义一个Student类，在类中初始化学生的信息，并定义print_score方法用于打印成绩，可直接通过对象的方法打印出成绩
4. 面向对象的设计思想是，先对一个问题抽象出一个class，再根据具体问题由class创建Instance

### 类和实例

1. 面向对象编程最重要的概念就是类和实例
2. 动态语言：运行时才确定数据类型的语言，变量是使用之前无需申明类型。一个变量可以时不同的类型，由上下文决定，效率更高
3. 静态语言：在编译时变量的数据类型就可以确定的语言，通常要求在变量使用之前就声明变量的类型。一旦指定变量的类型，后续无法改变，更安全

### 访问限制

1. 使用private变量和方法进行访问限制
2. 可通过get和set方法访问和修改内部的私有变量，同时使用这种形式修改变量还可以进行内部检查

### 继承和多态

1. 继承：子类和父类的概念
2. 多态：由父类可以衍生出多种子类，这些子类既有父类的特性，又具有自身自有的特性
3. 由继承和多态可以引申出**开闭原则**和**鸭子类型**
   - 由于python中的多态，在编写代码可以实现对扩展开放，对修改封闭。也就是受新增功能可以在不修改当前函数的情况下使用多态进行扩展实现
   - 鸭子类型：python甚至可以要求两个类继承自不同的父类，但是只要有相同的方法或属性，就可以实现在同一个函数下调用

### 获取对象信息

1. 判断对象类型：type()和isinstance()，注意instance()的第二个参数可以是包含一系列类型的list
2. dir()：该函数可以返回对象的所有属性和方法
3. 不是特别常用的三个判断，获取和设置对象属性的函数：hasattr(), getattr(), setattr()

### 实例属性和类属性

1. 给实例绑定属性的方法是通过实例变量或者通过self变量（在\__init__中）
2. 类属性，在\__init__之外，类内定义的属性称为类属性，类属性是一个静态的变量，所有的实例都可以访问当类属性，每一个实例对其的修改都会保存下来，可以通过classname.attrname这种方式访问到类属性



## 面向对象高级编程

### 使用\__slots__

1. 给一个实例动态的绑定一个方法，主要是使用函数MethodType

   ~~~python
   from types import MethodType
   class Students(Object):
       pass
   def set_age(age):
       pass
   s = Students()
   s.set_age = MethodType(set_age, s)
   ~~~

2.\__slots__

该方法用于对实例中的属性进行限制，只有在\__slots__中的属性允许在实例中进行绑定

3.值得一提的是，父类的\__slots__在子类中并不起作用

### 使用@property

1. 使用@property装饰器可将类中的方法变成属性进行调用
2. @property方法还带有一个setter方法，用于对属性进行设置时做一个检查

### 多重继承

1. 当一个类需要具有好几个父类的属性时，可以使用多重继承，方式类似于：

   ~~~python
   class Dog(Mammal, Runnable):
       pass
   ~~~

2. 多重继承的实现，通常被称为MixIn，逻辑是正常的继承主类，而多继承的类则可以带上MixIn后缀进行分辨主从。增加代码的可读性，分辨出继承链

### 定制类

1. 定制类的意思是在类中添加一些特定的属性或者方法，以此来完善类的功能
2. \__slots__
3. \__len__()
4. \__str__()
5. \__repr__()
6. \__iter__()
7. \__getitem__()：返回对象中特定下下标的元素
8. \__setitem__()
9. \__delitem__()
10. \__getattr__：当类中不存在某种属性或者方法时，在返回报错之前，会先在\__getattr__中进行查找，若能找到，则返回之
11. \__call__：实现在对象本身上进行调用，而不需要通过类中定义的方法或者属性

### 使用枚举类

1. 使用枚举类的方法：Enum：Enum('month', ('Jan', 'Feb', 'Mar'))
2. Enum自动定义value值，默认从1开始，也可以自己手动设置value值

### 使用元类

1. 元类，metaclass，使用元类创建类，使用类创建实例

2. 使用type函数可以快速创建出一个类

   ~~~python
   def fn():
   	pass
   Students = type('Students', (object), dict(hello=fn))
   # 第一个参数时类的名字，第二个为父类的名字，第三个为传入的函数和方法集合
   ~~~



## 错误、调试和测试

### 错误处理

1. 使用try...except...finally模块，注意except可以使用多次

2. 错误的继承关系，python 中所有错误都继承自baseException类，所以在捕获基类的时候会把其子类也一网打尽

3. try...except可以跨层调用，即可以捕获子函数中的错误

4. 使用logging打印出错误的同时，使程序可以正常的执行下去

   ~~~python
   except Exception as e:
   	logging.exception(e)
   ~~~

5. 抛出错误：raise



### 调试

1. print打印大法

2. 凡是可用print调试的地方都可以用assert代替

   - 使用assert的好处是：可以在启动python解释器时用参数-O来关闭assert，例如：

     ~~~shell
     python -O test.py
     ~~~

     关闭后，所有assert语句可看成pass	

3. loggging

   - 可以轻易的控制记录信息的级别，有debug,info,warning,error四个级别
   - 可以控制信息输出到不同的位置，console和log文件等

4. pdb（在命令行中进行单步调试的神器）

   - 启动方式：

     ~~~shell
     python -m pdb test.py
     ~~~

   - 查看代码，输入命令：l
   - 单步执行，输入命令：n
   - 添加断点，输入命令：b filename :lineno
     - 不带参数表示查看断点设置，带参数表示设置断点
   - 添加临时断点，输入命令：tbreak filename:lineno
   - 结束调试，退出程序，输入命令：q
   - 结束调试，继续执行程序，输入命令：c
   - 任何时候都可以输入**p 变量名**的形式来查看变量

5. pdb.set_trace()

   - import pdb之后，在可能出错的地方放一个pdb.set_trace()，就相当于设置一个断点，程序运行到这个地方的时候会自动的进入pdb调试环境中

6. IDE

   - visual studio code
   - pycharm

## 正则表达式

1. \d：匹配一个数字
   - 如'\d\d'可以匹配'00'
2. \w：匹配一个数字或者字母
   - 如'\w\w'可以匹配'1d'
3. \s：匹配一个空格，包括tab等空白符
   - 如'dd\s'可以匹配'dd '
4. .：匹配任意字符（一个）
   - 如'ss.'可以匹配'sss'
5. 若需要匹配若干个字符，可以使用下面的表达式
   - *：可以匹配任意个字符
   - +：表示至少匹配一个前面表达式规定的字符，若前面没有规定，则表示所有字符均可
     - 如'sss\s\d+'可以匹配'sss 111'
   - ?：表示0个或者一个字符
     - 如'sss\s\d?'可以匹配'sss 1'或者'sss '
   - {n}：表示需要匹配n个字符
   - {n,m}：表示需要匹配n-m个字符
6. 若需要匹配特殊字符，比如'-'需要用'\\'进行转义
   - 比如匹配电话号码'010-123456'，可以用'\d{3}\\-\d{3,8}'

